From d590f725c51efb291ebeee1188480884376bc2de Mon Sep 17 00:00:00 2001
From: Koen Kooi <koen.kooi@linaro.org>
Date: Mon, 26 Jan 2015 09:15:32 +0100
Subject: [PATCH 3/3] hi6220 fb: 'trace_dot' doesn't exist, so don't try to use
 it when tracing is enabled.

Signed-off-by: Koen Kooi <koen.kooi@linaro.org>
---
 drivers/video/hisi/hi6220/ade_overlay.c    | 6 +++---
 drivers/video/hisi/hi6220/balong_compose.c | 4 ++--
 drivers/video/hisi/hi6220/balong_fb.c      | 2 +-
 3 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/drivers/video/hisi/hi6220/ade_overlay.c b/drivers/video/hisi/hi6220/ade_overlay.c
index 66cb629..bc448f2 100755
--- a/drivers/video/hisi/hi6220/ade_overlay.c
+++ b/drivers/video/hisi/hi6220/ade_overlay.c
@@ -6566,7 +6566,7 @@ int ade_overlay_layer_set(struct ade_compose_data_type  *ade_pri_data, struct ov
     BUG_ON(ade_layer_info == NULL);
 
 #ifndef PC_UT_TEST_ON
-#ifdef CONFIG_TRACING
+#ifdef CONFIG_BROKEN_HISI_TRACING
     trace_dot(SF, "5", 0);
 #endif
 #endif
@@ -6714,7 +6714,7 @@ int ade_overlay_layer_set(struct ade_compose_data_type  *ade_pri_data, struct ov
     }
 
 #ifndef PC_UT_TEST_ON
-#ifdef CONFIG_TRACING
+#ifdef CONFIG_BROKEN_HISI_TRACING
     trace_dot(SF, "6", 0);
 #endif
 #endif
@@ -6902,7 +6902,7 @@ int ade_fb_pan_display(struct fb_var_screeninfo *var, struct fb_info *info)
     }
 
 #ifndef PC_UT_TEST_ON
-#ifdef CONFIG_TRACING
+#ifdef CONFIG_BROKEN_HISI_TRACING
     trace_dot(SF, "8", 0);
 #endif
 #endif
diff --git a/drivers/video/hisi/hi6220/balong_compose.c b/drivers/video/hisi/hi6220/balong_compose.c
index b8022a9..9c8481f 100755
--- a/drivers/video/hisi/hi6220/balong_compose.c
+++ b/drivers/video/hisi/hi6220/balong_compose.c
@@ -285,7 +285,7 @@ STATIC int balong_ade_overlay_commit(struct ade_compose_data_type    *ade_pri_da
             ade_pri_data->fb_reserved_flag = false;
         }
 #ifndef PC_UT_TEST_ON
-#ifdef CONFIG_TRACING
+#ifdef CONFIG_BROKEN_HISI_TRACING
         trace_dot(SF, "7", 0);
 #endif
 #endif
@@ -324,7 +324,7 @@ STATIC int balong_ade_overlay_commit(struct ade_compose_data_type    *ade_pri_da
             }
 
 #ifndef PC_UT_TEST_ON
-#ifdef CONFIG_TRACING
+#ifdef CONFIG_BROKEN_HISI_TRACING
             trace_dot(SF, "8", 0);
 #endif
 #endif
diff --git a/drivers/video/hisi/hi6220/balong_fb.c b/drivers/video/hisi/hi6220/balong_fb.c
index 0f63d5d..3dedffe 100755
--- a/drivers/video/hisi/hi6220/balong_fb.c
+++ b/drivers/video/hisi/hi6220/balong_fb.c
@@ -1840,7 +1840,7 @@ int balong_fb_pan_display(struct fb_var_screeninfo *var, struct fb_info *info)
     BUG_ON(balongfd == NULL);
 
 #ifndef PC_UT_TEST_ON
-#ifdef CONFIG_TRACING
+#ifdef CONFIG_BROKEN_HISI_TRACING
     trace_dot(SF, "7", 0);
 #endif
 #endif
-- 
1.9.3

